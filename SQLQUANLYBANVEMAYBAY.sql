CREATE DATABASE BANVEMAYBAY
GO
USE BANVEMAYBAY
DROP TABLE MAYBAY
CREATE TABLE MAYBAY(
	IDMayBay VARCHAR(50) PRIMARY KEY,
	SoHieuMayBay VARCHAR(50) NOT NULL,
	HangMayBay VARCHAR(50) NOT NULL,
	SoLuongGhe INT NOT NULL
)
INSERT INTO MAYBAY
VALUES('VN-A101','VN - Vietnam Airlines','Vietnam Airlines',250),
('VJ-A102','VJ - VietJet Air','VietJet Air',250),
('VN-A103','VN - Vietnam Airlines','Vietnam Airlines',250),
('VJ-A104','VJ - VietJet Air','VietJet Air',250),
('VJ-A105','VJ - VietJet Air','VietJet Air',250),
('VN-A106','VN - Vietnam Airlines','Vietnam Airlines',250),
('VN-A107','VN - Vietnam Airlines','Vietnam Airlines',250),
('VN-A108','VN - Vietnam Airlines','Vietnam Airlines',250),
('VJ-A109','VJ - VietJet Air','VietJet Air',250)


CREATE TABLE CHUYENBAY(
	IDChuyenBay VARCHAR(50) PRIMARY KEY,
	IDMayBay VARCHAR(50) FOREIGN KEY REFERENCES MAYBAY(IDMayBay),
	NgayDi Date not null,
	ThoiGianDi INT NOT NULL,
	ThoiGianDen INT NOT NULL,
	ThoiGianTre INT NOT NULL,
	GhiChu VARCHAR(255)
)

INSERT INTO CHUYENBAY
VALUES('VN112','VN-A103','2024-6-12',1920,2130,20,'Chuyen bay di HCM'),
('VJ113','VJ-A102','2024-6-4',800,950,0,'Chuyen bay di Nha Trang'),
('VN114','VN-A101','2024-5-26',400,530,0,'Chuyen bay di Hue'),
('VJ115','VJ-A104','2024-5-26',1120,1240,0,'Chuyen bay di Da Nang'),
('VN116','VN-A106','2024-5-19',120,320,0,'Chuyen bay di Ha Noi'),
('VJ117','VJ-A105','2024-5-17',2020,2150,0,'Chuyen bay di Da Nang'),
('VN118','VN-A107','2024-5-17',1520,1650,0,'Chuyen bay di Hue'),
('VN119','VN-A108','2024-4-22',1920,2130,0,'Chuyen bay di HCM'),
('VJ111','VJ-A109','2024-4-21',1220,1400,0,'Chuyen bay di Nha Trang')

CREATE TABLE VE(
	IDVe VARCHAR(50) PRIMARY KEY,
	IDChuyenBay VARCHAR(50) FOREIGN KEY REFERENCES CHUYENBAY(IDChuyenBay),
	MaGhe VARCHAR(50) NOT NULL,
	DiaDiemDi VARCHAR(50) NOT NULL,
	DiaDiemDen VARCHAR(50) NOT NULL,
	IDHang VARCHAR(50) FOREIGN KEY REFERENCES HANGVE(IDHang) NOT NULL,
	NgayMua DATE NOT NULL,
	GiaTien FLOAT NOT NULL
)

INSERT INTO VE

VALUES('A123-133454','VN112','AFF121','HA NOI','TP HO CHI MINH','HN','2024-02-16',10000000),
('A123-123454','VJ115','AFF122','HA NOI','DA NANG','HTG','2024-02-14',20000000),
('A123-143454','VN116','AFF123','DA NANG','HA NOI','PT','2024-11-19',1500000),
('A123-153454','VJ111','AFF124','HA NOI','NHA TRANG','PTDB','2023-10-20',3600000),
('A123-163454','VJ117','AFF125','HA NOI','DA NANG','HN','2022-04-28',10000000),
('A123-173454','VJ113','AFF126','HA NOI','NHA TRANG','HTG','2021-04-30',30000000),
('A123-183454','VN114','AFF127','HA NOI','HUE','PT','2020-09-05',2500000),
('A123-193454','VN119','AFF128','HA NOI','TP HO CHI MINH','PTDB','2021-11-20',5000000),
('A123-113454','VN118','AFF129','HA NOI','NHA TRANG','HN','2020-05-01',8000000)
>>>>>>> Stashed changes


CREATE TABLE HANGVE(
	IDHang VARCHAR(50) PRIMARY KEY,
	TenHang VARCHAR(50) 
)

INSERT INTO HANGVE
VALUES('HN','Hạng Nhất'),
('HTG','Hạng Thương Gia'),
('PT','Phổ Thông'),
('PTDB','Phổ Thông Đặc Biệt')



CREATE TABLE CHITIETKHACHHANG(
	IDKhachHang VARCHAR(50) PRIMARY KEY,
	TenKhachHang VARCHAR(50) NOT NULL,
	SDT INT NOT NULL,
	SoHoChieu VARCHAR(50) NOT NULL,
	Email VARCHAR(50) NOT NULL,
	DiaChi VARCHAR(100) 
)

INSERT INTO CHITIETKHACHHANG
VALUES('KH131','Nguyen Khanh Toan','0982781665','A0119212','Khanh@gmail.com','Bac Giang CITY'),
('KH132','Nguyen Van Quoc','0982781675','A0118212','Quoc@gmail.com','Ha Noi CITY'),
('KH133','Nguyen Ngoc Diep','0982781685','A0117212','Diep@gmail.com','Lang Son CITY'),
('KH134','Nguyen Van Toi','0982781695','A0116212','Toi@gmail.com','Son La CITY'),
('KH135','Nguyen Thanh Truc','0982782655','A0115212','Truc@gmail.com','Hoa Binh CITY'),
('KH136','Hoang Thai Anh','0982781635','A0113212','Anh@gmail.com','Yen Bai CITY'),
('KH137','Do Tot Nghiep','0982781658','A0112212','Nghiep@gmail.com','Ha Giang CITY'),
('KH138','Luu Ba Anh','0982781653','A0111212','Anh@gmail.com','Cao Bang CITY'),
('KH139','Cau Khanh Trung','0982731655','A0110212','Trung@gmail.com','Bac Giang CITY')

CREATE TABLE TAIKHOAN(
	IDTaiKhoan VARCHAR(50) PRIMARY KEY,
	TenDangNhap VARCHAR(50) NOT NULL,
	MatKhau VARCHAR(50) NOT NULL
)
 INSERT INTO TAIKHOAN
 VALUES('TK001','VMB111','VMB'),
 ('TK002','VMB112','VMB'),
 ('TK003','VMB113','VMB'),
 ('TK004','VMB114','VMB')
CREATE TABLE THONGTINCANHAN(
	IDThongTinCaNhan VARCHAR(50) PRIMARY KEY,
	TenNhanVien VARCHAR(50) NOT NULL,
	SoCCCD INT NOT NULL,
	SDT INT NOT NULL,
	DiaChi VARCHAR(50),
	Email VARCHAR(50)
)

INSERT INTO THONGTINCANHAN
VALUES('NVV001','Nguyen Thi Ngoc Lan',0243050197,0193723823,'HA NOI','Lanntn@gmail.com'),
('NVV002','Nguyen Thi Lan Anh',0234050097,0543723823,'BAC NINH','Anhntl@gmail.com'),
('NVV003','Dao Thi Tuyet Nhi',0284750097,0193543823,'HA NAM','Nhidtt@gmail.com'),
('NVV004','Luong Thi Ngoc En',0240940097,0999723823,'CAO BANG','Enltn@gmail.com')

CREATE TABLE BAOCAO(
	IDBaoCao VARCHAR(50) PRIMARY KEY,
	LoaiBaoCao VARCHAR(50) NOT NULL,
	NgayBaoCao DATE NOT NULL,
	GhiChu VARCHAR(255)
)
 INSERT INTO BAOCAO
 VALUES('BC001','Bao cao chuyen bay','2024-02-19','Chuyen bay bi tre'),
 ('BC002','Bao cao bao tri','2023-12-10','Bao tri noi that VJ115'),
 ('BC003','Bao cao khach hang','2021-01-11','Khach hang bi di ung do an'),
 ('BC004','Bao cao tinh trang chuyen bay','2024-11-19','23 Khach hang lo chuyen VN116')
 
CREATE TABLE NHANVIEN(
	IDNhanVien VARCHAR(50) PRIMARY KEY,
	IDTaiKhoan VARCHAR(50) FOREIGN KEY REFERENCES TAIKHOAN(IDTaiKhoan),
	IDThongTinCaNhan VARCHAR(50) FOREIGN KEY REFERENCES THONGTINCANHAN(IDThongTinCaNhan),
	IDBaoCao VARCHAR(50) FOREIGN KEY REFERENCES BAOCAO(IDBaoCao),
	TrangThai BIT NOT NULL,
	Luong FLOAT NOT NULL,
	ChucVu VARCHAR(50) NOT NULL
)

INSERT INTO NHANVIEN
VALUES('NV001','TK001','NVV001','BC001',0,25000000,'Nhan Vien'),
('NV002','TK002','NVV002','BC002',0,25000000,'Nhan Vien'),
('NV003','TK003','NVV003','BC004',0,25000000,'Nhan Vien'),
('NV004','TK004','NVV004','BC003',1,40000000,'Quan Ly')
CREATE TABLE THANHTOAN(
	IDThanhToan VARCHAR(50) PRIMARY KEY,
	HinhThucThanhToan VARCHAR(50) NOT NULL,
	ThoiGianThanhToan DATE NOT NULL,
	TrangThai VARCHAR(50) NOT NULL
)
	
INSERT INTO THANHTOAN
VALUES('TTB01','Tien Mat','2024-11-16','Da thanh toan'),
('TTB02','Tien Mat','2024-02-13','Da thanh toan'),
('TTB03','Tien Mat','2024-11-18','Da thanh toan'),
('TTB04','Tien Mat','2023-10-17','Da thanh toan'),
('TTB05','Tien Mat','2022-04-26','Da thanh toan'),
('TTB06','Tien Mat','2021-04-28','Da thanh toan'),
('TTB07','Tien Mat','2020-09-01','Da thanh toan'),
('TTB08','Tien Mat','2021-11-28','Da thanh toan'),
('TTB09','Tien Mat','2020-04-29','Da thanh toan')


CREATE TABLE HOADON(
	IDHoaDon VARCHAR(50) PRIMARY KEY,
	IDKhachHang VARCHAR(50) FOREIGN KEY REFERENCES ChiTietKhachHang(IDKhachHang),
	IDNhanVien VARCHAR(50) FOREIGN KEY REFERENCES NHANVIEN(IDNhanVien),
	IDThanhToan VARCHAR(50) FOREIGN KEY REFERENCES THANHTOAN(IDThanhToan),
	ThoiGianTao DATE NOT NULL
)

INSERT INTO HOADON
VALUES('HD1','KH131','NV002','TTB01','2024-11-16'),
('HD2','KH132','NV001','TTB02','2024-02-13'),
('HD3','KH133','NV002','TTB03','2024-11-18'),
('HD4','KH134','NV003','TTB04','2023-10-17'),
('HD5','KH135','NV004','TTB05','2022-04-26'),
('HD6','KH136','NV001','TTB06','2021-04-28'),
('HD7','KH137','NV003','TTB07','2020-09-01'),
('HD8','KH138','NV001','TTB08','2021-11-28'),
('HD9','KH139','NV003','TTB09','2020-04-29')


CREATE TABLE HOADONCHITIET(
	IDHoaDonChiTiet VARCHAR(50) PRIMARY KEY,
	IDHoaDon VARCHAR(50) FOREIGN KEY REFERENCES HOADON(IDHoaDon),
	IDVe VARCHAR(50) FOREIGN KEY REFERENCES VE(IDVe),
	ThanhTien FLOAT NOT NULL
)

INSERT INTO HOADONCHITIET
VALUES('HDCT1','HD1','A123-133454',4000000),
('HDCT2','HD2','A123-123454',200000),
('HDCT3','HD3','A123-143454',1500000),
('HDCT4','HD4','A123-153454',360000),
('HDCT5','HD5','A123-163454',1500000),
('HDCT6','HD6','A123-173454',3000000),
('HDCT7','HD7','A123-183454',2500000),
('HDCT8','HD8','A123-193454',1200000),
('HDCT9','HD9','A123-113454',2000000)




SELECT * FROM  MAYBAY
SELECT * FROM  CHUYENBAY
SELECT * FROM  HANGVE
SELECT * FROM VE
SELECT * FROM CHITIETKHACHHANG
SELECT * FROM TAIKHOAN
SELECT * FROM THONGTINCANHAN
SELECT * FROM BAOCAO
SELECT * FROM NHANVIEN
SELECT * FROM THANHTOAN
SELECT * FROM HOADON 
SELECT * FROM HOADONCHITIET

SELECT KH.SoHoChieu, KH.TenKhachHang, KH.SDT, HD.IDHoaDon, HD.ThoiGianTao
FROM HOADON HD JOIN CHITIETKHACHHANG KH
ON HD.IDKhachHang=KH.IDKhachHang